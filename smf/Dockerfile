from oaisoftwarealliance/oai-smf:develop

ENV TZ=Europe/Paris
ENV INSTANCE=0
ENV PID_DIRECTORY=/var/run
ENV SMF_INTERFACE_NAME_FOR_N4=eth0
ENV SMF_INTERFACE_NAME_FOR_SBI=eth0
ENV SMF_INTERFACE_PORT_FOR_SBI=80
ENV SMF_INTERFACE_HTTP2_PORT_FOR_SBI=9090
ENV SMF_API_VERSION=v1
ENV DEFAULT_DNS_IPV4_ADDRESS=8.8.8.8
ENV DEFAULT_DNS_SEC_IPV4_ADDRESS=4.4.4.4
ENV AMF_IPV4_ADDRESS=192.168.70.132
ENV AMF_PORT=80
ENV AMF_API_VERSION=v1
ENV AMF_FQDN=oai-amf
ENV UDM_IPV4_ADDRESS=192.168.70.137
ENV UDM_PORT=80
ENV UDM_API_VERSION=v2
ENV UDM_FQDN=oai-udm
ENV UPF_IPV4_ADDRESS=192.168.70.134
ENV UPF_FQDN_0=oai-spgwu
ENV NRF_IPV4_ADDRESS=192.168.70.130
ENV NRF_PORT=80
ENV NRF_API_VERSION=v1
ENV USE_LOCAL_SUBSCRIPTION_INFO=yes
ENV USE_NETWORK_INSTANCE=no
ENV NRF_FQDN=oai-nrf
ENV REGISTER_NRF=yes
ENV DISCOVER_UPF=yes
ENV USE_FQDN_DNS=yes
ENV HTTP_VERSION=1
ENV UE_MTU=1500
ENV DNN_NI0=oai
ENV TYPE0=IPv4
ENV DNN_RANGE0="12.1.1.2 - 12.1.1.253"
ENV NSSAI_SST0=1
ENV NSSAI_SD0=0x1
ENV SESSION_AMBR_UL0=10000Mbps
ENV SESSION_AMBR_DL0=10000Mbps
ENV DNN_NI1=oai2
ENV TYPE1=IPv4
ENV DNN_RANGE1="12.1.2.2 - 12.1.2.253"
ENV NSSAI_SST1=1
ENV NSSAI_SD1=0x2
ENV SESSION_AMBR_UL1=10000Mbps
ENV SESSION_AMBR_DL1=10000Mbps
ENV DNN_NI2=oai3
ENV TYPE2=IPv4
ENV DNN_RANGE2="12.1.3.2 - 12.1.3.253"
ENV NSSAI_SST2=1
ENV NSSAI_SD2=0x3
ENV SESSION_AMBR_UL2=10000Mbps
ENV SESSION_AMBR_DL2=10000Mbps
ENV DNN_NI3=ims
ENV TYPE3=IPv4v6
ENV DNN_RANGE3="14.1.1.2 - 14.1.1.253"
ENV DEFAULT_CSCF_IPV4_ADDRESS=127.0.0.1
ENV ENABLE_USAGE_REPORTING=no

COPY child-entrypoint.sh  /openair-smf/bin/
RUN chmod +x /openair-smf/bin/child-entrypoint.sh

ENTRYPOINT ["/bin/bash","/openair-smf/bin/child-entrypoint.sh"]
CMD ["/openair-smf/bin/oai_smf", "-c", "/openair-smf/etc/smf.conf", "-o"]
